{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "additionalProperties": false,
  "properties": {
    "paikkauskohteet": {
      "type": "array",
      "items": {
        "type": "object",
        "additionalProperties": false,
        "required": [
          "harjaId",
          "kohdetyyppi",
          "tierekisteriosoitevali",
          "alikohteet",
          "pituus"
        ],
        "properties": {
          "yhaId": {
            "type": "integer",
            "multipleOf": 1
          },
          "harjaId": {
            "type": "integer",
            "multipleOf": 1
          },
          "urakka": {
            "type": "integer",
            "description": "Urakan ID HARJAn tietokannassa, eli HarjaId.",
            "multipleOf": 1
          },
          "kohdenumero": {
            "type": "integer",
            "multipleOf": 1
          },
          "kohdetyyppi": {
            "type": "string",
            "enum": [
              "päällyste",
              "kevytliikenne",
              "sora"
            ]
          },
          "nimi": {
            "type": "string",
            "maxLength": 30
          },
          "tunnus": {
            "type": "string",
            "maxLength": 30
          },
          "tierekisteriosoitevali": {
            "$ref": "#/definitions/tierekisteriosoitevali"
          },
          "pituus": {
            "type": "integer",
            "multipleOf": 1,
            "description": "Pituus metreinä, laskettu tieosoitteista HARJAssa."
          },
          "kokonaishinta": {
            "type": "number"
          },
          "alikohteet": {
            "type": "array",
            "items": {
              "type": "object",
              "required": [
                "harjaId",
                "tierekisteriosoitevali"
              ],
              "properties": {
                "yhaId": {
                  "type": "number"
                },
                "harjaId": {
                  "type": "number"
                },
                "tierekisteriosoitevali": {
                  "$ref": "#/definitions/tierekisteriosoitevali-kaista-ja-ajorata"
                },
                "paallystystoimenpide": {
                  "$ref": "#/definitions/paallystystoimenpide"
                }
              }
            }
          }
        }
      }
    }
  },
  "definitions": {
    "tierekisteriosoitevali": {
      "type": "object",
      "additionalProperties": false,
      "required": [
        "tienumero",
        "aosa",
        "aet",
        "losa",
        "let"
      ],
      "properties": {
        "karttapaivamaara": {
          "type": "string",
          "format": "date"
        },
        "tienumero": {
          "type": "integer",
          "multipleOf": 1,
          "description": "Tien numero, jolle tieosoiteväli kohdistuu."
        },
        "aosa": {
          "type": "integer",
          "multipleOf": 1,
          "description": "Tieosoitevälin alun tieosa"
        },
        "aet": {
          "type": "integer",
          "multipleOf": 1,
          "description": "Etäisyys alkuosan sisällä"
        },
        "losa": {
          "type": "integer",
          "multipleOf": 1,
          "description": "Tieosoitevälin lopun tieosa"
        },
        "let": {
          "type": "integer",
          "multipleOf": 1,
          "description": "Etäisyys loppuosan sisällä"
        }
      }
    },
    "tierekisteriosoitevali-kaista-ja-ajorata": {
      "type": "object",
      "additionalProperties": false,
      "required": [
        "tienumero",
        "aosa",
        "aet",
        "losa",
        "let"
      ],
      "properties": {
        "karttapaivamaara": {
          "type": "string",
          "format": "date"
        },
        "tienumero": {
          "type": "integer",
          "multipleOf": 1,
          "description": "Tien numero, jolle tieosoiteväli kohdistuu."
        },
        "aosa": {
          "type": "integer",
          "multipleOf": 1,
          "description": "Tieosoitevälin alun tieosa"
        },
        "aet": {
          "type": "integer",
          "multipleOf": 1,
          "description": "Etäisyys alkuosan sisällä"
        },
        "losa": {
          "type": "integer",
          "multipleOf": 1,
          "description": "Tieosoitevälin lopun tieosa"
        },
        "let": {
          "type": "integer",
          "multipleOf": 1,
          "description": "Etäisyys loppuosan sisällä"
        },
        "ajorata": {
          "type": "integer",
          "enum": [
            0,
            1,
            2
          ]
        },
        "kaista": {
          "type": "integer",
          "enum": [
            1,
            11,
            12,
            13,
            21,
            22,
            23,
            14,
            15,
            16,
            17,
            18,
            19,
            24,
            25,
            26,
            27,
            28,
            29,
            31
          ]
        }
      }
    },
    "paallyste": {
      "type": "string",
      "enum": [
        "betoni",
        "kivi",
        "avoin asfaltti",
        "asfalttibetoni",
        "epäjatkuva asfaltti",
        "kivimastiksiasfaltti",
        "kantavan kerroksen AB",
        "bit.sidottu kantava ker.",
        "valuasfaltti",
        "pehmeä asfalttibetoni (b)",
        "pehmeä asfalttibetoni (v)",
        "pehmeä asfalttibetoni (o)",
        "sirotepintaus",
        "soratien pintaus",
        "sora",
        "ei päällystetyyppiä"
      ]
    },
    "kuulamylly": {
      "type": "string",
      "enum": [
        "AN5",
        "AN7",
        "AN10",
        "AN14",
        "AN19",
        "AN30",
        "AN22",
        "Ei tietoa"
      ]
    },
    "paallystetyomenetelma": {
      "type": "string",
      "enum": [
        "paksuudeltaan vakio laatta",
        "massapintaus",
        "kuumennuspintaus",
        "MP kuumalle tasatulle alustalle",
        "remix-pintaus",
        "2-kerroksinen remix-pintaus",
        "PAB-O/V:n remix-pintaus",
        "ART-pintaus",
        "Novachip-massapintaus",
        "karhinta",
        "sorastus",
        "soratien kevyt korjaus",
        "soratien kelirikon poistava korjaus",
        "soratien raskas rakenteen parantaminen",
        "hienojyrsintä",
        "sirotepintaus",
        "urapaikkaus",
        "ura-remix",
        "vauriopaikkaus",
        "ei tietoa"
      ]
    },
    "paallystystoimenpide": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "leveys": {
          "type": "number",
          "description": "Yksikkö: Metri"
        },
        "pintaAla": {
          "type": "number",
          "description": "Yksikkö: Neliömetri"
        },
        "uusiPaallyste": {
          "$ref": "#/definitions/paallyste"
        },
        "raekoko": {
          "type": "integer",
          "multipleOf": 1,
          "minimum": 0,
          "maximum": 99
        },
        "massamenekki": {
          "description": "Käytetty massa kg/m2",
          "type": "number",
          "minimum": 0,
          "maximum": 999
        },
        "kokonaismassamaara": {
          "description": "Yhteensä käytetty massa tonneina",
          "type": "number"
        },
        "rcProsentti": {
          "type": "integer",
          "multipleOf": 1,
          "minimum": 0,
          "maximum": 100
        },
        "kuulamylly": {
          "$ref": "#/definitions/kuulamylly"
        },
        "paallystetyomenetelma": {
          "$ref": "#/definitions/paallystetyomenetelma"
        }
      }
    }
  }
}

{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "additionalProperties": false,
  "properties": {
    "paikkauskohteet": {
      "type": "array",
      "items": {
        "type": "object",
        "additionalProperties": false,
        "required": [
          "harjaId",
          "kohdetyyppi",
          "tierekisteriosoiteväli",
          "alikohteet"
        ],
        "properties": {
          "yhaId": {
            "type": "number"
          },
          "harjaId": {
            "type": "number"
          },
          "kohdenumero": {
            "type": "number"
          },
          "kohdetyyppi": {
            "type": "string",
            "enum": [
              "päällyste",
              "kevytliikenne",
              "sora"
            ]
          },
          "nimi": {
            "type": "string",
            "maxLength": 30
          },
          "tunnus": {
            "type": "string",
            "maxLength": 30
          },
          "tierekisteriosoiteväli": {
            "$ref": "#/definitions/tierekisteriosoiteväli"
          },
          "alikohteet": {
            "type": "array",
            "items": {
              "type": "object",
              "required": [
                "harjaId",
                "tierekisteriosoiteväli"
              ],
              "properties": {
                "yhaId": {
                  "type": "number"
                },
                "harjaId": {
                  "type": "number"
                },
                "tierekisteriosoiteväli": {
                  "$ref": "#/definitions/tierekisteriosoiteväli"
                },
                "päällystetoimenpide": {
                  "type": "object",
                  "properties": {
                    "uusi-päällyste": {
                      "$ref": "#/definitions/päällyste"
                    },
                    "raekoko": {
                      "type": "integer",
                      "multipleOf": 1,
                      "minimum": 0,
                      "maximum": 99
                    },
                    "massamenekki": {
                      "description": "Käytetty massa kg/m2",
                      "type": "number",
                      "minimum": 0,
                      "maximum": 999
                    },
                    "kokonaismassamäärä": {
                      "description": "Yhteensä käytetty massa tonneina",
                      "type": "number"
                    },
                    "rc-prosentti": {
                      "type": "integer",
                      "multipleOf": 1,
                      "minimum": 0,
                      "maximum": 100
                    },
                    "kuulamylly": {
                      "$ref": "#/definitions/kuulamylly"
                    },
                    "päällystetyömenetelmä": {
                      "$ref": "#/definitions/päällystetyömenetelmä"
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  },
  "definitions": {
    "tierekisteriosoiteväli": {
      "type": "object",
      "required": [
        "tienumero",
        "aosa",
        "aet",
        "losa",
        "let"
      ],
      "properties": {
        "karttapaivamäärä": {
          "type": "string",
          "format": "date"
        },
        "tienumero": {
          "type": "integer",
          "description": "Tien numero, jolle tieosoiteväli kohdistuu."
        },
        "aosa": {
          "type": "integer",
          "description": "Tieosoitevälin alun tieosa"
        },
        "aet": {
          "type": "integer",
          "description": "Etäisyys alkuosan sisällä"
        },
        "losa": {
          "type": "integer",
          "description": "Tieosoitevälin lopun tieosa"
        },
        "let": {
          "type": "integer",
          "description": "Etäisyys loppuosan sisällä"
        }
      }
    },
    "päällyste": {
      "type": "string",
      "enum": [
        "betoni",
        "kivi",
        "avoin asfaltti",
        "asfalttibetoni",
        "epäjatkuva asfaltti",
        "kivimastiksiasfaltti",
        "kantavan kerroksen AB",
        "bit.sidottu kantava ker.",
        "valuasfaltti",
        "pehmeä asfalttibetoni (b)",
        "pehmeä asfalttibetoni (v)",
        "pehmeä asfalttibetoni (o)",
        "sirotepintaus",
        "soratien pintaus",
        "sora",
        "ei päällystetyyppiä"
      ]
    },
    "kuulamylly": {
      "type": "string",
      "enum": [
        "AN5",
        "AN7",
        "AN10",
        "AN14",
        "AN19",
        "AN30",
        "AN22",
        "Ei tietoa"
      ]
    },
    "päällystetyömenetelmä": {
      "type": "string",
      "enum": [
        "paksuudeltaan vakio laatta",
        "massapintaus",
        "kuumennuspintaus",
        "MP kuumalle tasatulle alustalle",
        "remix-pintaus",
        "2-kerroksinen remix-pintaus",
        "PAB-O/V:n remix-pintaus",
        "ART-pintaus",
        "Novachip-massapintaus",
        "karhinta",
        "sorastus",
        "soratien kevyt korjaus",
        "soratien kelirikon poistava korjaus",
        "soratien raskas rakenteen parantaminen",
        "hienojyrsintä",
        "sirotepintaus",
        "urapaikkaus",
        "ura-remix",
        "vauriopaikkaus",
        "ei tietoa"
      ]
    }
  }
}

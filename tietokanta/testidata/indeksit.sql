-- pari tosi vanhaa indeksiä, jotta saadaan perusluku suolasakkorapparitestiä varten
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2005', 2008, 12, 118.7);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2005', 2009, 1, 119.4);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2005', 2009, 2, 119.2);

INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2005', 2013, 1, 101.9);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2005', 2013, 2, 103.2);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2005', 2013, 3, 107.6);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2005', 2013, 4, 101.9);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2005', 2013, 5, 106.2);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2005', 2013, 6, 106.2);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2005', 2013, 7, 108.9);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2005', 2013, 8, 104.2);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2005', 2013, 9, 107.4);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2005', 2013, 10, 102.0);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2005', 2013, 11, 105.2);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2005', 2013, 12, 105.2);

INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2005', 2014, 1, 102.9);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2005', 2014, 2, 105.2);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2005', 2014, 3, 107.2);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2005', 2014, 4, 102.9);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2005', 2014, 5, 105.2);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2005', 2014, 6, 107.2);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2005', 2014, 7, 102.9);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2005', 2014, 8, 105.2);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2005', 2014, 9, 107.2);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2005', 2014, 10, 102.9);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2005', 2014, 11, 105.2);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2005', 2014, 12, 107.2);

INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2005', 2015, 1, 103.9);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2005', 2015, 2, 105.2);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2005', 2015, 3, 104.2);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2005', 2015, 4, 103.9);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2005', 2015, 5, 105.2);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2005', 2015, 6, 104.2);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2005', 2015, 7, 105.9);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2005', 2015, 8, 106.2);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2005', 2015, 9, 106.2);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2005', 2015, 10, 136.8);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2005', 2015, 11, 136.8);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2005', 2015, 12, 136.7);

INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2005', 2016, 1, 134.9);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2005', 2016, 2, 134.7);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2005', 2016, 3, 134.8);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2005', 2016, 4, 135.0);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2005', 2016, 5, 135.2);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2005', 2016, 6, 135.5);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2005', 2016, 7, 135.0);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2005', 2016, 8, 135.2);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2005', 2016, 9, 135.5);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2005', 2016, 10, 135.8);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2005', 2016, 11, 135.0);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2005', 2016, 12, 135.2);

INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2010', 2013, 1, 101.9);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2010', 2013, 2, 106.2);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2010', 2013, 3, 102.2);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2010', 2013, 4, 104.9);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2010', 2013, 5, 102.2);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2010', 2013, 6, 105.2);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2010', 2013, 7, 107.9);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2010', 2013, 8, 122.2);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2010', 2013, 9, 127.2);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2010', 2013, 10, 132.9);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2010', 2013, 11, 145.2);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2010', 2013, 12, 167.2);

INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2010', 2014, 1, 102.9);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2010', 2014, 2, 105.2);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2010', 2014, 3, 107.2);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2010', 2014, 4, 102.9);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2010', 2014, 5, 105.2);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2010', 2014, 6, 107.2);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2010', 2014, 7, 102.9);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2010', 2014, 8, 105.2);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2010', 2014, 9, 107.2);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2010', 2014, 10, 102.9);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2010', 2014, 11, 105.2);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2010', 2014, 12, 107.2);

INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2010', 2015, 1, 103.9);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2010', 2015, 2, 105.2);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2010', 2015, 3, 104.2);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2010', 2015, 4, 103.9);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2010', 2015, 5, 105.2);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2010', 2015, 6, 104.2);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2010', 2015, 7, 105.9);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2010', 2015, 8, 106.2);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2010', 2015, 9, 106.2);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2010', 2015, 10, 104.9);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2010', 2015, 11, 105.2);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2010', 2015, 12, 106.2);


INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2010', 2016, 1, 105.9);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2010', 2016, 2, 107.2);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2010', 2016, 3, 109.2);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2010', 2016, 4, 111.9);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2010', 2016, 5, 115.2);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2010', 2016, 6, 114.2);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2010', 2016, 7, 115.9);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2010', 2016, 8, 116.2);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2010', 2016, 9, 116.2);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2010', 2016, 10, 114.9);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2010', 2016, 11, 115.2);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2010', 2016, 12, 116.2);


INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2005 kunnossapidon osaindeksi', 2016, 1, 103.9);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2005 kunnossapidon osaindeksi', 2016, 2, 105.2);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2005 kunnossapidon osaindeksi', 2016, 3, 106.2);

INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2005 kunnossapidon osaindeksi', 2017, 1, 103.9);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2005 kunnossapidon osaindeksi', 2017, 2, 105.2);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2005 kunnossapidon osaindeksi', 2017, 3, 106.2);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2005 kunnossapidon osaindeksi', 2017, 4, 103.9);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2005 kunnossapidon osaindeksi', 2017, 5, 105.2);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2005 kunnossapidon osaindeksi', 2017, 6, 104.2);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2005 kunnossapidon osaindeksi', 2017, 7, 105.9);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2005 kunnossapidon osaindeksi', 2017, 8, 106.2);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2005 kunnossapidon osaindeksi', 2017, 9, 106.2);

INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2010 Maarakennuskustannukset, kokonaisindeksi', 2017, 1, 103.9);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2010 Maarakennuskustannukset, kokonaisindeksi', 2017, 2, 105.2);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2010 Maarakennuskustannukset, kokonaisindeksi', 2017, 3, 104.2);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2010 Maarakennuskustannukset, kokonaisindeksi', 2017, 4, 103.9);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2010 Maarakennuskustannukset, kokonaisindeksi', 2017, 5, 105.2);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2010 Maarakennuskustannukset, kokonaisindeksi', 2017, 6, 104.2);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2010 Maarakennuskustannukset, kokonaisindeksi', 2017, 7, 105.9);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2010 Maarakennuskustannukset, kokonaisindeksi', 2017, 8, 106.2);
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2010 Maarakennuskustannukset, kokonaisindeksi', 2017, 9, 106.2);

DO $$
DECLARE
  indeksin_aloitus_vuosi INTEGER;
  indeksi_vuoteen_asti INTEGER;
  vuosi_ INTEGER;
  kuluva_kk INTEGER;
  arvo_ NUMERIC;
BEGIN
  IF ((SELECT date_part('month', now())) >= 10)
  THEN
      indeksin_aloitus_vuosi = (SELECT date_part('year', now())::INT - 3);
  ELSE
      indeksin_aloitus_vuosi = (SELECT date_part('year', now())::INT - 4);
  END IF;
  indeksi_vuoteen_asti = (SELECT date_part('year', now()));
  kuluva_kk = (SELECT date_part('month', now()));
  FOR vuosi_ IN indeksin_aloitus_vuosi..indeksi_vuoteen_asti
  LOOP
    IF (vuosi_ = indeksi_vuoteen_asti)
    THEN
      FOR kk IN 1..kuluva_kk
      LOOP
        arvo_ = (SELECT 100 + (vuosi_ - indeksin_aloitus_vuosi) * 10 + kk + (kk::DECIMAL / 12));
        INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2015', vuosi_, kk, arvo_);
      END LOOP;
    ELSE
      FOR kk IN 1..12
      LOOP
        arvo_ = (SELECT 100 + (vuosi_ - indeksin_aloitus_vuosi) * 10 + kk + (kk::DECIMAL / 12));
        INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo) VALUES ('MAKU 2015', vuosi_, kk, arvo_);
      END LOOP;
    END IF;
  END LOOP;
END $$;


INSERT INTO urakkatyypin_indeksi(urakkatyyppi, indeksinimi, koodi, raakaaine)
VALUES
  ('paallystys'::urakkatyyppi, 'Platts: testiindeksi XYZ', 'TESTIKOODI', 'bitumi');


-- Ylläpidon indeksejä
INSERT INTO indeksi (nimi, vuosi, kuukausi, arvo)
VALUES
  ('Platts: testiindeksi XYZ', 2015, 9, 225.00),
  ('Platts: testiindeksi XYZ', 2016, 9, 306.00),
  ('Platts: FO 3,5%S CIF NWE Cargo', 2015, 9, 125.36),
  ('Platts: FO 3,5%S CIF NWE Cargo', 2016, 9, 206.29),
  ('Platts: Propane CIF NWE 7kt+', 2015, 9, 285.55),
  ('Platts: Propane CIF NWE 7kt+', 2016, 9, 271.02),
  ('Platts: ULSD 10ppmS CIF NWE Cargo', 2015, 9, 123.45),
  ('Platts: ULSD 10ppmS CIF NWE Cargo', 2016, 9, 234.56);


INSERT INTO paallystysurakan_indeksi (indeksi,lahtotason_vuosi,lahtotason_kuukausi,urakka)
VALUES
  ((SELECT id FROM urakkatyypin_indeksi WHERE indeksinimi = 'Platts: testiindeksi XYZ' AND urakkatyyppi = 'paallystys'),
  2015, 9, (SELECT id FROM urakka where nimi = 'Muhoksen päällystysurakka')),
  ((SELECT id FROM urakkatyypin_indeksi WHERE indeksinimi = 'Platts: FO 3,5%S CIF NWE Cargo' AND urakkatyyppi = 'paallystys'),
   2016, 9, (SELECT id FROM urakka where nimi = 'Muhoksen päällystysurakka'));
